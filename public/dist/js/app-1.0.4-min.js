/*! imsep 2020-02-01 */

var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var a,t,i,r,o,d,s,n="",l=0;if(!e)return e;for(e=Base64._utf8_encode(e);l<e.length;)r=(a=e.charCodeAt(l++))>>2,o=(3&a)<<4|(t=e.charCodeAt(l++))>>4,d=(15&t)<<2|(i=e.charCodeAt(l++))>>6,s=63&i,isNaN(t)?d=s=64:isNaN(i)&&(s=64),n=n+this._keyStr.charAt(r)+this._keyStr.charAt(o)+this._keyStr.charAt(d)+this._keyStr.charAt(s);return n},decode:function(e){var a,t,i,r,o,d,s="",n=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");n<e.length;)a=this._keyStr.indexOf(e.charAt(n++))<<2|(r=this._keyStr.indexOf(e.charAt(n++)))>>4,t=(15&r)<<4|(o=this._keyStr.indexOf(e.charAt(n++)))>>2,i=(3&o)<<6|(d=this._keyStr.indexOf(e.charAt(n++))),s+=String.fromCharCode(a),64!=o&&(s+=String.fromCharCode(t)),64!=d&&(s+=String.fromCharCode(i));return s=Base64._utf8_decode(s)},_utf8_encode:function(e){if(!e)return e;e=e.replace(/\r\n/g,"\n");for(var a="",t=0;t<e.length;t++){var i=e.charCodeAt(t);i<128?a+=String.fromCharCode(i):(127<i&&i<2048?a+=String.fromCharCode(i>>6|192):(a+=String.fromCharCode(i>>12|224),a+=String.fromCharCode(i>>6&63|128)),a+=String.fromCharCode(63&i|128))}return a},_utf8_decode:function(e){for(var a="",t=0,i=c1=c2=0;t<e.length;)(i=e.charCodeAt(t))<128?(a+=String.fromCharCode(i),t++):191<i&&i<224?(c2=e.charCodeAt(t+1),a+=String.fromCharCode((31&i)<<6|63&c2),t+=2):(c2=e.charCodeAt(t+1),c3=e.charCodeAt(t+2),a+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),t+=3);return a}};$(function(){$.fn.select2.defaults.set("theme","bootstrap"),app.name="iMSEP",$(".convertTolocalDateTime").each(function(e){var a=$(this).text(),t=new Date(a),i=t.toString();i=t.toLocaleString();var r=$(this).attr("title");r||(r=""),r=r+" ("+t.toLocaleString("en",{timeZone:"UTC"})+" GMT)",$(this).attr("title",r),$(this).text(i)}),$('div[data-notify="true"]').each(function(e){$.notify({message:$(this).html()},{type:$(this).data("notify-type")||"info",delay:$(this).data("notify-delay"),animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}})})}),function(d){var s,n=d();d.fn.sortable=function(o){var e=String(o);return o=d.extend({connectWith:!1},o),this.each(function(){if(/^(enable|disable|destroy)$/.test(e)){var a=d(this).children(d(this).data("items")).attr("draggable","enable"==e);"destroy"==e&&a.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s")}else{a=d(this).children(o.items);var t,i,r=d("<"+(/^(ul|ol)$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');a.find(o.handle).mousedown(function(){t=!0}).mouseup(function(){t=!1}),d(this).data("items",o.items),n=n.add(r),o.connectWith&&d(o.connectWith).add(this).data("connectWith",o.connectWith),a.attr("draggable","true").on("dragstart.h5s",function(e){if(o.handle&&!t)return!1;t=!1;var a=e.originalEvent.dataTransfer;a.effectAllowed="move",a.setData("Text","dummy"),i=(s=d(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){s&&(s.removeClass("sortable-dragging").show(),n.detach(),i!=s.index()&&s.parent().trigger("sortupdate",{item:s}),s=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,r]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){return!a.is(s)&&o.connectWith!==d(s).parent().data("connectWith")||("drop"==e.type?(e.stopPropagation(),n.filter(":visible").after(s),s.trigger("dragend.h5s")):(e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",a.is(this)?(o.forcePlaceholderSize&&r.height(s.outerHeight()),s.hide(),d(this)[r.index()<d(this).index()?"after":"before"](r),n.not(r).detach()):n.is(this)||d(this).children(o.items).length||(n.detach(),d(this).append(r))),!1)})}})}}(jQuery),function(n){function o(e){return/[.]/.exec(e)?/[^.]+$/.exec(e)[0].toLowerCase():null}n.validator.addMethod("url2",function(e,a){return this.optional(a)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},n.validator.messages.url),n.validator.unobtrusive.adapters.add("url2",[],function(e){e.rules.url2=e.params,e.message&&(e.messages.url2=e.message)}),n.validator.addMethod("positivenumber",function(e,a,t){return 0<Number(e)},""),n.validator.unobtrusive.adapters.add("positivenumber",[],function(e){e.rules.positivenumber=e.params,e.message&&(e.messages.positivenumber=e.message)}),n.validator.addMethod("integer",function(e,a){return this.optional(a)||/^-?\d+$/.test(e)},"A positive or negative non-decimal number please"),n.validator.unobtrusive.adapters.add("integer",[],function(e){e.rules.integer=e.params,e.message&&(e.messages.integer=e.message)}),n.validator.addMethod("lessthanorequal",function(e,a,t){if(""===e)return!0;try{e=parseFloat(e)}catch(e){}var i=t.other,r=e,o=n(a).closest("form").find("[name="+i+"]");try{r=parseFloat(o.val())}catch(e){}return e<=r},""),n.validator.unobtrusive.adapters.add("lessthanorequal",["other"],function(e){e.rules.lessthanorequal=e.params,e.message&&(e.messages.lessthanorequal=e.message)}),n.validator.addMethod("filesize",function(e,a,t){var i=t.maxsize;try{i=parseFloat(i)}catch(e){}var r=n(a),o=r.closest("form").find(":file[name="+r.attr("name")+"]"),d=0;return o.each(function(){var e=n(this)[0].files[0];e&&e.size&&(d+=e.size)}),d<i},""),n.validator.unobtrusive.adapters.add("filesize",["maxsize"],function(e){e.rules.filesize=e.params,e.message&&(e.messages.filesize=e.message)}),n.validator.unobtrusive.adapters.add("filetype",["validtypes"],function(e){e.rules.filetype={validtypes:e.params.validtypes.split(",")},e.messages.filetype=e.message}),n.validator.addMethod("filetype",function(e,a,t){for(var i=0;i<a.files.length;i++){var r=o(a.files[0].name);if(-1===n.inArray(r,t.validtypes))return!1}return!0}),n.validator.addMethod("requiredif",function(e,a,t){var i="#"+t.dependentproperty,r=t.targetvalue;r=(null==r?"":r).toString();var o=n(i),d=o.attr("type"),s="checkbox"===d||"radio"===d?o.attr("checked").toString():o.val();return n.trim(r)!==n.trim(s)&&("*"!==n.trim(r)||""===n.trim(s))||n.validator.methods.required.call(this,e,a,t)}),n.validator.unobtrusive.adapters.add("requiredif",["dependentproperty","targetvalue"],function(e){e.rules.requiredif={dependentproperty:e.params.dependentproperty,targetvalue:e.params.targetvalue},e.messages.requiredif=e.message})}(jQuery);var waitingDialog=waitingDialog||function(i){"use strict";var r=i('<div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;"><div class="modal-dialog modal-m"><div class="modal-content"><div class="modal-header"><h3 style="margin:0;"></h3></div><div class="modal-body"><div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"></div></div></div></div></div></div>');return{show:function(e,a){void 0===a&&(a={}),void 0===e&&(e="Loading");var t=i.extend({dialogSize:"m",progressType:"",onHide:null},a);r.find(".modal-dialog").attr("class","modal-dialog").addClass("modal-"+t.dialogSize),r.find(".progress-bar").attr("class","progress-bar"),t.progressType&&r.find(".progress-bar").addClass("progress-bar-"+t.progressType),r.find("h3").html(e),"function"==typeof t.onHide&&r.off("hidden.bs.modal").on("hidden.bs.modal",function(e){t.onHide.call(r)}),r.modal()},hide:function(){r.modal("hide")}}}(jQuery),waitingDialog2=waitingDialog2||function(i){"use strict";var r=i('<div class="modal fade" id="pleaseWaitDialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog modal-m"><div class="modal-content">    <div class="modal-header">        <h1>Processing...</h1>    </div>    <div class="modal-body">      <div class="progress">        <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 100%">          <span class="sr-only"></span>        </div>      </div>    </div>  </div></div></div>');return{show:function(e,a){void 0===a&&(a={}),void 0===e&&(e="Loading");var t=i.extend({dialogSize:"m",progressType:"",onHide:null},a);r.find(".modal-dialog").attr("class","modal-dialog").addClass("modal-"+t.dialogSize),r.find(".progress-bar").attr("class","progress-bar"),t.progressType&&r.find(".progress-bar").addClass("progress-bar-"+t.progressType),r.find("h1").text(e),"function"==typeof t.onHide&&r.off("hidden.bs.modal").on("hidden.bs.modal",function(e){t.onHide.call(r)}),r.modal()},hide:function(){r.modal("hide")},setProgressType:function(e){r.find(".progress-bar").attr("class","progress-bar"),e&&r.find(".progress-bar").addClass("progress-bar-"+e)},setMessage:function(e){r.find("h1").text(e)}}}(jQuery);function ConfirmDialog(){var e=$('<div class="modal fade" style="z-index:1055" id="confirmDialog" role="dialog"><div class="modal-dialog "> <div class="modal-content">\t<div class="modal-header">\t  <button type="button" class="close" data-dismiss="modal">&times;</button>\t  <h4 class="modal-title">Confirm</h4>\t</div>\t<div class="modal-body">\t  <p id="confirmDialog_content">Please Confirm</p>\t</div>\t<div class="modal-footer">\t  <button id="confirmDialog_yes" type="button" class="btn btn-default" data-dismiss="modal">Yes</button>\t  <button  id="confirmDialog_no" type="button" class="btn btn-default" data-dismiss="modal">No</button>\t</div></div></div></div>');this.dialog=e}ConfirmDialog.prototype.show=function(e,a,t){var i=this;i._confirm=!1;var r=this.dialog;void 0===t&&(t={}),void 0===e&&(e="Please Confirm");var o=$.extend({title:"fa"===app.language?"تایید کنید":"Confirm",yesTitle:"fa"===app.language?"بله":"Yes",noTitle:"fa"===app.language?"خیر":"No",dialogSize:"m",alertType:"warning"},t);r.find(".modal-dialog").attr("class","modal-dialog").addClass("modal-"+o.dialogSize),o.alertType&&r.find(".modal-body").addClass("alert-"+o.alertType),r.find(".modal-title").text(o.title),r.find("#confirmDialog_yes").text(o.yesTitle),r.find("#confirmDialog_no").text(o.noTitle),r.find("#confirmDialog_yes").click(function(){i._confirm=!0,r.modal("hide"),window.history.back()}),r.find("#confirmDialog_no").click(function(){i._confirm=!1,r.modal("hide"),window.history.back()}),r.find("#confirmDialog_content").html(e),r.on("hidden.bs.modal",function(){a&&a(i._confirm);o.title;history.pushState("",document.title,window.location.pathname+window.location.search)});var d=o.title;window.location.hash=d,window.onhashchange=function(){location.hash||r.modal("hide")},r.modal()},ConfirmDialog.prototype.hide=function(){this.dialog.modal("hide")},ConfirmDialog.prototype.setMessage=function(e){this.dialog.find("#confirmDialog_content").html(e)};var confirmDialog=new ConfirmDialog,app={name:"untitled",layout:"ltr",language:"en",version:"1.0.0",identity:void 0,pageData:{},initMap_Lon:37.41,initMap_Lat:9,initMap_Zoom:4,OSM_REQUEST_TIMEOUT:2e4,OSM_FEATURE_COUNT_LIMIT1:1e5,OSM_FEATURE_COUNT_LIMIT2:5e5,MAx_TABLE_VIEW_RECORDS:1e3,routeServiceTokens:[],overpassApiServer:"//overpass-api.de/api/interpreter",setIdentity:function(e){this.identity=JSON.parse(e)},set_UPLOAD_RASTER_MAX_SIZE_MB:function(e){this.UPLOAD_RASTER_MAX_SIZE_MB=e},set_UPLOAD_SHAPEFILE_MAX_SIZE_MB:function(e){this.UPLOAD_SHAPEFILE_MAX_SIZE_MB=e},set_ROUTE_SERVICE_TOKENS:function(e){e&&(this.routeServiceTokens=e.split(","))},test:function(e){alert(e)}};