/*! imsep 2019-06-01 */

$(document).ready(function(){pageTask.init()});var pageTask={init:function(){var e=this;this.initMembersLists(),$("#submitMembers").click(function(){e.submitMembers()})},initMembersLists:function(){$("body").on("click",".list-group .list-group-item",function(){$(this).toggleClass("active")}),$(".list-arrows button").click(function(){var e=$(this),i="";e.hasClass("move-left")?((i=$(".list-right ul li.active")).clone().appendTo(".list-left ul"),i.remove()):e.hasClass("move-right")&&((i=$(".list-left ul li.active")).clone().appendTo(".list-right ul"),i.remove())}),$(".dual-list .selector").click(function(){var e=$(this);e.hasClass("selected")?(e.removeClass("selected").closest(".well").find("ul li.active").removeClass("active"),e.children("i").removeClass("glyphicon-check").addClass("glyphicon-unchecked")):(e.addClass("selected").closest(".well").find("ul li:not(.active)").addClass("active"),e.children("i").removeClass("glyphicon-unchecked").addClass("glyphicon-check"))}),$('[name="SearchDualList"]').keyup(function(e){var i=e.keyCode||e.which;if("9"!=i){"27"==i&&$(this).val(null);var t=$(this).closest(".dual-list").find(".list-group li"),s=$.trim($(this).val()).replace(/ +/g," ").toLowerCase();t.show().filter(function(){return!~$(this).text().replace(/\s+/g," ").toLowerCase().indexOf(s)}).hide()}})},submitMembers:function(){$.validator.unobtrusive.parse(document);var e=$("#membersForm");e.validate();if(e.valid()){var i=[];e.find("#listMembers li").each(function(){var e=$(this);"add"===e.data("action")&&i.push(e.data("id"))}),toAddArrayStr=i.join(","),e.find("#addmembers").val(toAddArrayStr);var t=[];e.find("#listUsers li").each(function(){var e=$(this);"remove"===e.data("action")&&t.push(e.data("id"))}),toRemoveArrayStr=t.join(","),e.find("#removemembers").val(toRemoveArrayStr),e.submit()}else{var s=$(".input-validation-error").first();s&&$("html, body").animate({scrollTop:s.offset().top-20},1e3)}}};